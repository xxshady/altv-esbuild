// ------------------- altv-esbuild banner -------------------
// banner imports
import ___altvEsbuild_altvInject_altShared___ from "alt-shared";
import ___altvEsbuild_altvInject_alt___ from "alt";
import ___altvEsbuild_altvInject_native___ from "natives";
const ___altvEsbuild_altvInject_pluginOptions___ = {"mode":"client","dev":{"enabled":true,"hotReload":true,"hotReloadServerPort":8877,"playersReconnect":true,"playersReconnectDelay":200,"playersReconnectResetPos":true,"connectionCompleteEvent":true,"disconnectEvent":true,"restartCommand":true,"topLevelExceptionHandling":true,"moveExternalsOnTop":true,"enhancedRestartCommand":false,"serverStartedEvent":true},"bugFixes":{"webViewFlickering":true,"playerPrototype":true,"playerDamageOnFirstConnect":true},"altvEnums":true,"enhancedAltLog":true};
// ----------------- external imports on top -----------------
// ----------------- external imports on top -----------------
await (async () => { // start banner wrapper
var nn=Object.defineProperty;var rn=(t,e,n)=>e in t?nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var G=(t,e,n)=>(rn(t,typeof e!="symbol"?e+"":e,n),n);var x="altv-esbuild",te="__altv-esbuild-resource-control";var ge=class{receiver;sender;constructor(e,n,o){this.isCommunicatorSenderAndReceiver(e)?(this.sender=e.sender??null,this.receiver=e.receiver??null):(this.sender=e,this.receiver=e),this.receiver?.on("data",i=>{i=i.toString();for(let r of i.split("|"))if(r)try{let{event:s,args:l}=JSON.parse(r),a=n[s];if(!a){o(`received unknown event: ${s}`);return}a(...l)}catch(s){o(`failed to handle chunk: '${r}' error: ${s?.stack}`)}}),this.receiver?.on("error",i=>{i?.code==="ECONNRESET"||i?.code==="ECONNREFUSED"||o(`socket error: ${i.stack}`,i)})}send(e,...n){if(!this.sender)throw new Error("EventManager cannot send since sender was not provided");let o={args:n,event:e};this.sender.write(JSON.stringify(o)+"|")}destroy(){this.receiver?.removeAllListeners("data"),this.receiver?.removeAllListeners("error")}isCommunicatorSenderAndReceiver(e){return!!(e.sender||e.receiver)}};var Ce=___altvEsbuild_altvInject_alt___,I=class{constructor(e){this.name=e;this.debug=()=>{}}debug;info(...e){Ce.log(`~bl~[${x}][${this.name}]~w~`,...e)}error(...e){Ce.logError(`[${x}][${this.name}]`,...e)}warn(...e){Ce.logWarning(`[${x}][${this.name}]`,...e)}};var g={},on=/\u001b\[\d\d?m/g,{defineProperty:M,getOwnPropertyDescriptor:K,ownKeys:Y}=Reflect,{apply:sn,bind:Pt,call:ln}=Function.prototype,H=Pt.bind(ln);g.uncurryThis=H;var we=Pt.bind(sn);g.applyBind=we;var We=["ArrayOf","ArrayPrototypePush","ArrayPrototypeUnshift","MathHypot","MathMax","MathMin","StringPrototypeConcat","TypedArrayOf"];function Ge(t){return typeof t=="symbol"?`Symbol${t.description[7].toUpperCase()}${t.description.slice(8)}`:`${t[0].toUpperCase()}${t.slice(1)}`}function He(t,e,n,{enumerable:o,get:i,set:r}){M(t,`${e}Get${n}`,{__proto__:null,value:H(i),enumerable:o}),r!==void 0&&M(t,`${e}Set${n}`,{__proto__:null,value:H(r),enumerable:o})}function _t(t,e,n){for(let o of Y(t)){let i=Ge(o),r=K(t,o);if("get"in r)He(e,n,i,r);else{let s=`${n}${i}`;M(e,s,{__proto__:null,...r}),We.includes(s)&&M(e,`${s}Apply`,{__proto__:null,value:we(r.value,t)})}}}function an(t,e,n){for(let o of Y(t)){let i=Ge(o),r=K(t,o);if("get"in r)He(e,n,i,r);else{let{value:s}=r;typeof s=="function"&&(r.value=s.bind(t));let l=`${n}${i}`;M(e,l,{__proto__:null,...r}),We.includes(l)&&M(e,`${l}Apply`,{__proto__:null,value:we(s,t)})}}}function he(t,e,n){for(let o of Y(t)){let i=Ge(o),r=K(t,o);if("get"in r)He(e,n,i,r);else{let{value:s}=r;typeof s=="function"&&(r.value=H(s));let l=`${n}${i}`;M(e,l,{__proto__:null,...r}),We.includes(l)&&M(e,`${l}Apply`,{__proto__:null,value:we(s)})}}}["Proxy","globalThis"].forEach(t=>{g[t]=globalThis[t]});[decodeURI,decodeURIComponent,encodeURI,encodeURIComponent].forEach(t=>{g[t.name]=t});[escape,eval,unescape].forEach(t=>{g[t.name]=t});["JSON","Math","Proxy","Reflect"].forEach(t=>{_t(globalThis[t],g,t)});["AggregateError","Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int16Array","Int32Array","Int8Array","Map","Number","Object","RangeError","ReferenceError","RegExp","Set","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakRef","WeakSet"].forEach(t=>{let e=globalThis[t];g[t]=e,_t(e,g,t),he(e.prototype,g,`${t}Prototype`)});["Promise"].forEach(t=>{let e=globalThis[t];g[t]=e,an(e,g,t),he(e.prototype,g,`${t}Prototype`)});[{name:"TypedArray",original:Reflect.getPrototypeOf(Uint8Array)},{name:"ArrayIterator",original:{prototype:Reflect.getPrototypeOf(Array.prototype[Symbol.iterator]())}},{name:"StringIterator",original:{prototype:Reflect.getPrototypeOf(String.prototype[Symbol.iterator]())}}].forEach(({name:t,original:e})=>{g[t]=e,he(e,g,t),he(e.prototype,g,`${t}Prototype`)});var{ArrayPrototypeForEach:Je=Array.prototype.forEach.call,FinalizationRegistry:Ie=Ie,FunctionPrototypeCall:Ze=Function.prototype.call,Map:F=F,ObjectFreeze:se=S.freeze.call,ObjectSetPrototypeOf:le=S.setPrototypeOf,Promise:J=J,PromisePrototypeThen:At=J.prototype.then,Set:V=V,SymbolIterator:ae=Symbol.iterator,WeakMap:me=me,WeakRef:Le=Le,WeakSet:ve=ve}=g,qe=(t,e)=>{class n{constructor(i){this._iterator=t(i)}next(){return e(this._iterator)}[ae](){return this}}return le(n.prototype,null),se(n.prototype),se(n),n};g.SafeArrayIterator=qe(g.ArrayPrototypeSymbolIterator,g.ArrayIteratorPrototypeNext);g.SafeStringIterator=qe(g.StringPrototypeSymbolIterator,g.StringIteratorPrototypeNext);var dt=(t,e)=>{Je(Y(t),n=>{K(e,n)||M(e,n,{__proto__:null,...K(t,n)})})},T=(t,e)=>{if(ae in t.prototype){let n=new t,o;Je(Y(t.prototype),i=>{if(!K(e.prototype,i)){let r=K(t.prototype,i);if(typeof r.value=="function"&&r.value.length===0&&ae in(Ze(r.value,n)??{})){let s=H(r.value);o??=H(s(n).next);let l=qe(s,o);r.value=function(){return new l(this)}}M(e.prototype,i,{__proto__:null,...r})}})}else dt(t.prototype,e.prototype);return dt(t,e),le(e.prototype,null),se(e.prototype),se(e),e};g.makeSafe=T;g.SafeMap=T(F,class extends F{constructor(e){super(e)}});g.SafeWeakMap=T(me,class extends me{constructor(e){super(e)}});g.SafeSet=T(V,class extends V{constructor(e){super(e)}});g.SafeWeakSet=T(ve,class extends ve{constructor(e){super(e)}});g.SafeFinalizationRegistry=T(Ie,class extends Ie{constructor(e){super(e)}});g.SafeWeakRef=T(Le,class extends Le{constructor(e){super(e)}});var cn=T(J,class extends J{constructor(e){super(e)}});g.PromisePrototypeCatch=(t,e)=>At(t,void 0,e);g.SafePromisePrototypeFinally=(t,e)=>new J((n,o)=>new cn((i,r)=>At(t,i,r)).finally(e).then(n,o));g.AsyncIteratorPrototype=g.ReflectGetPrototypeOf(g.ReflectGetPrototypeOf(async function*(){}).prototype);le(g,null);se(g);var{getOwnNonIndexProperties:Ne,getProxyDetails:fn=()=>{},kPending:Io=0,kFulfilled:Lo=1,kRejected:No=2,previewEntries:Pe,getConstructorName:Ye,propertyFilter:{ALL_PROPERTIES:$t,ONLY_ENUMERABLE:kt}={ALL_PROPERTIES:0,ONLY_ENUMERABLE:2}}={},dn=(t,e)=>{if(e===$t)return S.getOwnPropertyNames(t);if(kt)return Array.isArray(t)?[]:S.keys(t);throw new Error("unknown filter")};Ne=dn;var un=t=>t?.constructor?.name??"<UNKNOWN CONSTRUCTOR NAME>";Ye=un;var pn=t=>{let e=t instanceof F,n=[];if(!(t instanceof F||t instanceof V))return[n,e];try{n=t.entries()}catch(o){console.error("custom_previewEntries",o.stack)}return[n,e]};Pe=pn;var Fe=Uint8Array.prototype.__proto__,{ArrayIsArray:Ct=Array.isArray,ArrayPrototypeFilter:Rt=Array.prototype.filter.call,ArrayPrototypePop:gn=Array.prototype.pop.call,ArrayPrototypePush:N=Array.prototype.push.call,ArrayPrototypePushApply:ut=Array.prototype.push.apply,ArrayPrototypeSort:yn=Array.prototype.sort.call,ArrayPrototypeUnshift:pt=Array.prototype.unshift.call,BigIntPrototypeValueOf:hn=BigInt.prototype.valueOf.call,BooleanPrototypeValueOf:mn=Boolean.prototype.valueOf.call,DatePrototypeGetTime:vn=Date.prototype.getTime.call,DatePrototypeToISOString:Sn=Date.prototype.toISOString.call,DatePrototypeToString:bn=Date.prototype.toString.call,ErrorPrototypeToString:En=Error.prototype.toString.call,FunctionPrototypeToString:wn=Function.prototype.toString.call,JSONStringify:Fo=JSON.stringify,MapPrototypeGetSize:Pn=S.getOwnPropertyDescriptor(F.prototype,"size").get.call,MapPrototypeEntries:_n=F.prototype.entries.call,MathFloor:An=Math.floor,MathMax:fe=Math.max,MathMin:B=Math.min,MathRound:$n=Math.round,MathSqrt:gt=Math.sqrt,MathTrunc:kn=Math.trunc,Number:ie=ie,NumberIsFinite:Cn=ie.isFinite,NumberIsNaN:Ot=isNaN,NumberParseFloat:Bo=parseFloat,NumberParseInt:To=parseInt,NumberPrototypeValueOf:Rn=ie.prototype.valueOf.call,Object:S=S,ObjectAssign:Xe=S.assign,ObjectCreate:Mt=S.create,ObjectDefineProperty:Qe=S.defineProperty,ObjectGetOwnPropertyDescriptor:Se=S.getOwnPropertyDescriptor,ObjectGetOwnPropertyNames:Be=S.getOwnPropertyNames,ObjectGetOwnPropertySymbols:On=S.getOwnPropertySymbols,ObjectGetPrototypeOf:et=S.getPrototypeOf,ObjectIs:Mn=S.is,ObjectKeys:_e=S.keys,ObjectPrototypeHasOwnProperty:de=S.prototype.hasOwnProperty.call,ObjectPrototypePropertyIsEnumerable:xt=S.prototype.propertyIsEnumerable.call,ObjectSeal:xn=S.seal,RegExp:U=U,RegExpPrototypeExec:tt=U.prototype.exec.call,RegExpPrototypeSymbolReplace:be=U.prototype[Symbol.replace].call,RegExpPrototypeToString:In=U.prototype.toString.call,SafeStringIterator:Ln,SafeMap:Nn,SafeSet:It,SetPrototypeGetSize:Fn=S.getOwnPropertyDescriptor(V.prototype,"size").get.call,SetPrototypeValues:Bn=V.prototype.values.call,StringPrototypeCharCodeAt:Te=String.prototype.charCodeAt.call,StringPrototypeCodePointAt:Tn=String.prototype.codePointAt.call,StringPrototypeIncludes:re=String.prototype.includes.call,StringPrototypeNormalize:Dn=String.prototype.normalize.call,StringPrototypePadEnd:jn=String.prototype.padEnd.call,StringPrototypePadStart:Re=String.prototype.padStart.call,StringPrototypeRepeat:yt=String.prototype.repeat.call,StringPrototypeSlice:Oe=String.prototype.slice.call,StringPrototypeSplit:Do=String.prototype.split.call,StringPrototypeToLowerCase:zn=String.prototype.toLowerCase.call,StringPrototypeTrim:Un=String.prototype.trim.call,StringPrototypeValueOf:Kn=String.prototype.valueOf.call,SymbolPrototypeToString:Lt=Symbol.prototype.toString.call,SymbolPrototypeValueOf:Vn=Symbol.prototype.valueOf.call,SymbolToStringTag:ht=Symbol.toStringTag,TypedArrayPrototypeGetLength:Wn=S.getOwnPropertyDescriptor(Fe,"length").get.call,TypedArrayPrototypeGetSymbolToStringTag:Gn=S.getOwnPropertyDescriptor(Fe,Symbol.toStringTag).get.call}=g,{customInspectSymbol:Nt=Symbol.for("nodejs.util.inspect.custom"),isError:Ft=t=>t instanceof Error,join:oe,removeColors:Bt}={};function Hn(t,e){let n="";if(t.length!==0){let o=t.length-1;for(let i=0;i<o;i++)n+=t[i],n+=e;n+=t[o]}return n}oe=Hn;function Jn(t){return String.prototype.replace.call(t,on,"")}Bt=Jn;var{isStackOverflowError:Tt}={};function L(t){if(L.maxStack_ErrorMessage===void 0)try{let n=function(){n()};var e=n;n()}catch(n){L.maxStack_ErrorMessage=n.message,L.maxStack_ErrorName=n.name}return t&&t.name===L.maxStack_ErrorName&&t.message===L.maxStack_ErrorMessage}L.maxStack_ErrorMessage=void 0;L.maxStack_ErrorName=void 0;Tt=L;var{isAsyncFunction:Zn=t=>t?.constructor?.name==="AsyncFunction",isGeneratorFunction:qn=t=>t?.constructor?.name==="GeneratorFunction",isAnyArrayBuffer:Yn=t=>t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer,isArrayBuffer:Dt,isArgumentsObject:jt,isBoxedPrimitive:zt,isDataView:Ut,isExternal:Xn=()=>!1,isMap:Qn=t=>t instanceof F,isMapIterator:er=t=>t?.toString()==="[object Map Iterator]",isModuleNamespaceObject:nt,isNativeError:Kt=t=>!1,isPromise:tr=t=>t instanceof J,isSet:nr=t=>t instanceof V,isSetIterator:rr=t=>t?.toString()==="[object Set Iterator]",isWeakMap:or=t=>t instanceof me,isWeakSet:ir=t=>t instanceof ve,isRegExp:sr=t=>t instanceof U,isDate:lr=t=>t instanceof Date,isTypedArray:ar=t=>t instanceof Fe.constructor,isStringObject:cr=t=>typeof t=="object"&&t!=null&&t.constructor===String,isNumberObject:fr=t=>typeof t=="object"&&t!=null&&t.constructor===ie,isBooleanObject:dr=t=>typeof t=="object"&&t!=null&&t.constructor===Boolean,isBigIntObject:ur=t=>typeof t=="object"&&t!=null&&t.constructor===BigInt}={},pr=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0;Dt=pr;var gr=t=>t+""=="[object Arguments]"&&t[ae]!=null;jt=gr;var yr=t=>typeof t=="object"&&t!=null&&(t.constructor===ie||t.constructor===String||t.constructor===Boolean||t.constructor===BigInt||t.constructor===Symbol);zt=yr;var hr=t=>t instanceof DataView;Ut=hr;var mr=t=>{try{let e=t&&S.getOwnPropertyDescriptor(t,Symbol.toStringTag);return e.value==="Module"&&!(e.writable||e.enumerable||e.configurable)}catch{return!1}};nt=mr;var De=class extends Error{};function Vt(t,e){if(!t)throw new De(e)}var vr={exists:()=>!1};function Sr(t){let e="__internal_shit__"+t.name;return Qe(t,"name",{__proto__:null,value:e}),t}var br=Sr((t,e,n)=>{let o=n==null,i=o?!1:n.allowArray,r=o?!1:n.allowFunction;if(!(o?!1:n.nullable)&&t===null||!i&&Ct(t)||typeof t!="object"&&(!r||typeof t!="function"))throw new Error(`[validateObject] invalid ${e} type of arg, expected: Object`)});function Er(t,e){if(typeof t!="string")throw new Error(`value ${e} must be string`)}var Me,Wt=new It(Rt(Be(globalThis),t=>tt(/^[A-Z][a-zA-Z0-9]+$/,t)!==null)),Gt=t=>typeof t>"u"&&t!==void 0,P=xn({showHidden:!1,depth:2,colors:!1,customInspect:!0,showProxy:!1,maxArrayLength:100,maxStringLength:1e4,breakLength:80,compact:3,sorted:!1,getters:!1,numericSeparator:!1}),Z=0,rt=1,ce=2,wr=/[\x00-\x1f\x27\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/,je=/[\x00-\x1f\x27\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/g,Pr=/[\x00-\x1f\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/,_r=/[\x00-\x1f\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/g,Ar=/^[a-zA-Z_][a-zA-Z_0-9]*$/,$r=/^(0|[1-9][0-9]*)$/,kr=/^ {4}at (?:[^/\\(]+ \(|)node:(.+):\d+:\d+\)?$/,Cr=/[/\\]node_modules[/\\](.+?)(?=[/\\])/g,Rr=/^(\s+[^(]*?)\s*{/,Or=/(\/\/.*?\n)|(\/\*(.|\n)*?\*\/)/g,Mr=16,Ae=0,xr=1,Ir=2,Ee=["\\x00","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\x07","\\b","\\t","\\n","\\x0B","\\f","\\r","\\x0E","\\x0F","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1A","\\x1B","\\x1C","\\x1D","\\x1E","\\x1F","","","","","","","","\\'","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\x7F","\\x80","\\x81","\\x82","\\x83","\\x84","\\x85","\\x86","\\x87","\\x88","\\x89","\\x8A","\\x8B","\\x8C","\\x8D","\\x8E","\\x8F","\\x90","\\x91","\\x92","\\x93","\\x94","\\x95","\\x96","\\x97","\\x98","\\x99","\\x9A","\\x9B","\\x9C","\\x9D","\\x9E","\\x9F"],Lr="[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))",Nr=new U(Lr,"g"),ot;function Fr(t,e){let n={stylize:t.stylize,showHidden:t.showHidden,depth:t.depth,colors:t.colors,customInspect:t.customInspect,showProxy:t.showProxy,maxArrayLength:t.maxArrayLength,maxStringLength:t.maxStringLength,breakLength:t.breakLength,compact:t.compact,sorted:t.sorted,getters:t.getters,numericSeparator:t.numericSeparator,...t.userOptions};if(e){le(n,null);for(let o of _e(n))(typeof n[o]=="object"||typeof n[o]=="function")&&n[o]!==null&&delete n[o];n.stylize=le((o,i)=>{let r;try{r=`${t.stylize(o,i)}`}catch{}return typeof r!="string"?o:r},null)}return n}function O(t,e){let n={budget:{},indentationLvl:0,seen:[],currentDepth:0,stylize:Ke,showHidden:P.showHidden,depth:P.depth,colors:P.colors,customInspect:P.customInspect,showProxy:P.showProxy,maxArrayLength:P.maxArrayLength,maxStringLength:P.maxStringLength,breakLength:P.breakLength,compact:P.compact,sorted:P.sorted,getters:P.getters,numericSeparator:P.numericSeparator};if(arguments.length>1){if(arguments.length>2&&(arguments[2]!==void 0&&(n.depth=arguments[2]),arguments.length>3&&arguments[3]!==void 0&&(n.colors=arguments[3])),typeof e=="boolean")n.showHidden=e;else if(e){let o=_e(e);for(let i=0;i<o.length;++i){let r=o[i];de(P,r)||r==="stylize"?n[r]=e[r]:n.userOptions===void 0&&(n.userOptions=e)}}}return n.colors&&(n.stylize=Br),n.maxArrayLength===null&&(n.maxArrayLength=1/0),n.maxStringLength===null&&(n.maxStringLength=1/0),A(n,t,0)}O.custom=Nt;Qe(O,"defaultOptions",{__proto__:null,get(){return P},set(t){return br(t,"options"),Xe(P,t)}});O.colors=Xe(Mt(null),{reset:["w",0],bold:["wl"],dim:["w"],italic:["w"],underline:["w"],blink:["w"],inverse:["w"],hidden:["w"],strikethrough:["w"],doubleunderline:["w"],black:["k"],red:["rl"],green:["gl"],yellow:["yl"],blue:["bl"],magenta:["ml"],cyan:["cl"],white:["wl"],bgBlack:["w"],bgRed:["w"],bgGreen:["w"],bgYellow:["w"],bgBlue:["w"],bgMagenta:["w"],bgCyan:["w"],bgWhite:["w"],framed:["w"],overlined:["w"],gray:["kl"],redBright:["rl"],greenBright:["gl"],yellowBright:["yl"],blueBright:["bl"],magentaBright:["ml"],cyanBright:["cl"],whiteBright:["wl"],bgGray:["kl"],bgRedBright:["rl"],bgGreenBright:["gl"],bgYellowBright:["yl"],bgBlueBright:["bl"],bgMagentaBright:["ml"],bgCyanBright:["cl"],bgWhiteBright:["wl"]});function R(t,e){Qe(O.colors,e,{__proto__:null,get(){return this[t]},set(n){this[t]=n},configurable:!0,enumerable:!1})}R("gray","grey");R("gray","blackBright");R("bgGray","bgGrey");R("bgGray","bgBlackBright");R("dim","faint");R("strikethrough","crossedout");R("strikethrough","strikeThrough");R("strikethrough","crossedOut");R("hidden","conceal");R("inverse","swapColors");R("inverse","swapcolors");R("doubleunderline","doubleUnderline");O.styles=Xe(Mt(null),{special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red",module:"underline"});function xe(t,e){return e===-1?`"${t}"`:e===-2?`\`${t}\``:`'${t}'`}function ze(t){let e=Te(t);return Ee.length>e?Ee[e]:`\\u${e.toString(16)}`}function Ue(t){let e=wr,n=je,o=39;if(re(t,"'")&&(re(t,'"')?!re(t,"`")&&!re(t,"${")&&(o=-2):o=-1,o!==39&&(e=Pr,n=_r)),t.length<5e3&&tt(e,t)===null)return xe(t,o);if(t.length>100)return t=be(n,t,ze),xe(t,o);let i="",r=0;for(let s=0;s<t.length;s++){let l=Te(t,s);if(l===o||l===92||l<32||l>126&&l<160)r===s?i+=Ee[l]:i+=`${Oe(t,r,s)}${Ee[l]}`,r=s+1;else if(l>=55296&&l<=57343){if(l<=56319&&s+1<t.length){let a=Te(t,s+1);if(a>=56320&&a<=57343){s++;continue}}i+=`${Oe(t,r,s)}${`\\u${l.toString(16)}`}`,r=s+1}}return r!==t.length&&(i+=Oe(t,r)),xe(i,o)}function Br(t,e){let n=O.styles[e];if(n!==void 0){let o=O.colors[n];if(o!==void 0)return`~${o[0]}~${t}~w~`}return t}function Ke(t){return t}function Tr(){return[]}function Dr(t,e){try{return t instanceof e}catch{return!1}}function Ht(t,e,n,o){let i,r=t;for(;t||Gt(t);){let a=Se(t,"constructor");if(a!==void 0&&typeof a.value=="function"&&a.value.name!==""&&Dr(r,a.value))return o!==void 0&&(i!==t||!Wt.has(a.value.name))&&jr(e,r,i||r,n,o),String(a.value.name);t=et(t),i===void 0&&(i=t)}if(i===null)return null;let s=Ye(r);if(n>e.depth&&e.depth!==null)return`${s} <Complex prototype>`;let l=Ht(i,e,n+1,o);return l===null?`${s} <${O(i,{...e,customInspect:!1,depth:-1})}>`:`${s} <${l}>`}function jr(t,e,n,o,i){let r=0,s,l;do{if(r!==0||e===n){if(n=et(n),n===null)return;let a=Se(n,"constructor");if(a!==void 0&&typeof a.value=="function"&&Wt.has(a.value.name))return}r===0?l=new It:Je(s,a=>l.add(a)),s=Y(n),N(t.seen,e);for(let a of s){if(a==="constructor"||de(e,a)||r!==0&&l.has(a))continue;let f=Se(n,a);if(typeof f.value=="function")continue;let c=q(t,n,o,a,Z,f,e);t.colors?N(i,`\x1B[2m${c}\x1B[22m`):N(i,c)}gn(t.seen)}while(++r!==3)}function _(t,e,n,o=""){return t===null?e!==""&&n!==e?`[${n}${o}: null prototype] [${e}] `:`[${n}${o}: null prototype] `:e!==""&&t!==e?`${t}${o} [${e}] `:`${t}${o} `}function ne(t,e){let n,o=On(t);if(e)n=Be(t),o.length!==0&&ut(n,o);else{try{n=_e(t)}catch(i){Vt(Kt(i)&&i.name==="ReferenceError"&&nt(t)),n=Be(t)}o.length!==0&&ut(n,Rt(o,r=>xt(t,r)))}return n}function ye(t,e,n){let o="";return e===null&&(o=Ye(t),o===n&&(o="Object")),_(e,n,o)}function zr(t,e,n){if(n>t.depth&&t.depth!==null)return t.stylize("Proxy [Array]","special");n+=1,t.indentationLvl+=2;let o=[A(t,e[0],n),A(t,e[1],n)];return t.indentationLvl-=2,lt(t,o,"",["Proxy [","]"],ce,n)}function A(t,e,n,o){if(typeof e!="object"&&typeof e!="function"&&!Gt(e))return st(t.stylize,e,t);if(e===null)return t.stylize("null","null");let i=e,r=fn(e,!!t.showProxy);if(r!==void 0){if(r===null||r[0]===null)return t.stylize("<Revoked Proxy>","special");if(t.showProxy)return zr(t,r,n);e=r}if(t.customInspect){let s=e[Nt];if(typeof s=="function"&&s!==O&&!(e.constructor&&e.constructor.prototype===e)){let l=t.depth===null?null:t.depth-n,a=r!==void 0||!(i instanceof S),f=Ze(s,i,l,Fr(t,a),O);if(f!==i)return typeof f!="string"?A(t,f,n):f.replace(/\n/g,`
${" ".repeat(t.indentationLvl)}`)}}if(t.seen.includes(e)){let s=1;return t.circular===void 0?(t.circular=new Nn,t.circular.set(e,s)):(s=t.circular.get(e),s===void 0&&(s=t.circular.size+1,t.circular.set(e,s))),t.stylize(`[Circular *${s}]`,"special")}return Ur(t,e,n,o)}function Ur(t,e,n,o){let i,r;t.showHidden&&(n<=t.depth||t.depth===null)&&(r=[]);let s=Ht(e,t,n,r);r!==void 0&&r.length===0&&(r=void 0);let l=e[ht];(typeof l!="string"||l!==""&&(t.showHidden?de:xt)(e,ht))&&(l="");let a="",f=Tr,c,p=!0,y=0,h=t.showHidden?$t:kt,w=Z;if(e[ae]||s===null)if(p=!1,Ct(e)){let u=s!=="Array"||l!==""?_(s,l,"Array",`(${e.length})`):"";if(i=Ne(e,h),c=[`${u}[`,"]"],e.length===0&&i.length===0&&r===void 0)return`${c[0]}]`;w=ce,f=ro}else if(nr(e)){let u=Fn(e),v=_(s,l,"Set",`(${u})`);if(i=ne(e,t.showHidden),f=s!==null?vt.bind(null,e):vt.bind(null,Bn(e)),u===0&&i.length===0&&r===void 0)return`${v}{}`;c=[`${v}{`,"}"]}else if(Qn(e)){let u=Pn(e),v=_(s,l,"Map",`(${u})`);if(i=ne(e,t.showHidden),f=s!==null?St.bind(null,e):St.bind(null,_n(e)),u===0&&i.length===0&&r===void 0)return`${v}{}`;c=[`${v}{`,"}"]}else if(ar(e)){i=Ne(e,h);let u=e,v="";s===null&&(v=Gn(e),u=new g[v](e));let ft=Wn(e);if(c=[`${_(s,l,v,`(${ft})`)}[`,"]"],e.length===0&&i.length===0&&!t.showHidden)return`${c[0]}]`;f=oo.bind(null,u,ft),w=ce}else er(e)?(i=ne(e,t.showHidden),c=mt("Map",l),f=Et.bind(null,c)):rr(e)?(i=ne(e,t.showHidden),c=mt("Set",l),f=Et.bind(null,c)):p=!0;if(p)if(i=ne(e,t.showHidden),c=["{","}"],s==="Object"){if(jt(e)?c[0]="[Arguments] {":l!==""&&(c[0]=`${_(s,l,"Object")}{`),i.length===0&&r===void 0)return`${c[0]}}`}else if(typeof e=="function"){if(a=Wr(e,s,l),i.length===0&&r===void 0)return t.stylize(a,"special")}else if(sr(e)){a=In(s!==null?e:new U(e));let u=_(s,l,"RegExp");if(u!=="RegExp "&&(a=`${u}${a}`),i.length===0&&r===void 0||n>t.depth&&t.depth!==null)return t.stylize(a,"regexp")}else if(lr(e)){a=Ot(vn(e))?bn(e):Sn(e);let u=_(s,l,"Date");if(u!=="Date "&&(a=`${u}${a}`),i.length===0&&r===void 0)return t.stylize(a,"date")}else if(Ft(e)){if(a=qr(e,s,l,t,i),i.length===0&&r===void 0)return a}else if(Yn(e)){let u=Dt(e)?"ArrayBuffer":"SharedArrayBuffer",v=_(s,l,u);if(o===void 0)f=no;else if(i.length===0&&r===void 0)return v+`{ byteLength: ${it(t.stylize,e.byteLength,!1)} }`;c[0]=`${v}{`,pt(i,"byteLength")}else if(Ut(e))c[0]=`${_(s,l,"DataView")}{`,pt(i,"byteLength","byteOffset","buffer");else if(tr(e))c[0]=`${_(s,l,"Promise")}{`,f=lo;else if(ir(e))c[0]=`${_(s,l,"WeakSet")}{`,f=t.showHidden?io:bt;else if(or(e))c[0]=`${_(s,l,"WeakMap")}{`,f=t.showHidden?so:bt;else if(nt(e))c[0]=`${_(s,l,"Module")}{`,f=eo.bind(null,i);else if(zt(e)){if(a=Kr(e,t,i,s,l),i.length===0&&r===void 0)return a}else{if(i.length===0&&r===void 0){if(Xn(e)){let u="UNSUPPORTED VALUE";return t.stylize(`[External: ${u}]`,"special")}return`${ye(e,s,l)}{}`}c[0]=`${ye(e,s,l)}{`}if(n>t.depth&&t.depth!==null){let u=ye(e,s,l).slice(0,-1);return s!==null&&(u=`[${u}]`),t.stylize(u,"special")}n+=1,t.seen.push(e),t.currentDepth=n;let $,ee=t.indentationLvl;try{for($=f(t,e,n),y=0;y<i.length;y++)$.push(q(t,e,n,i[y],w));r!==void 0&&$.push(...r)}catch(u){let v=ye(e,s,l).slice(0,-1);return Xr(t,u,v,ee)}if(t.circular!==void 0){let u=t.circular.get(e);if(u!==void 0){let v=t.stylize(`<ref *${u}>`,"special");t.compact!==!0?a=a===""?v:`${v} ${a}`:c[0]=`${v} ${c[0]}`}}if(t.seen.pop(),t.sorted){let u=t.sorted===!0?void 0:t.sorted;if(w===Z)$=$.sort(u);else if(i.length>1){let v=$.slice($.length-i.length).sort(u);$.splice($.length-i.length,i.length,...v)}}let E=lt(t,$,a,c,w,n,e),C=(t.budget[t.indentationLvl]||0)+E.length;return t.budget[t.indentationLvl]=C,C>2**27&&(t.depth=-1),E}function mt(t,e){return e!==`${t} Iterator`&&(e!==""&&(e+="] ["),e+=`${t} Iterator`),[`[${e}] {`,"}"]}function Kr(t,e,n,o,i){let r,s;fr(t)?(r=Rn,s="Number"):cr(t)?(r=Kn,s="String",n.splice(0,t.length)):dr(t)?(r=mn,s="Boolean"):ur(t)?(r=hn,s="BigInt"):(r=Vn,s="Symbol");let l=`[${s}`;return s!==o&&(o===null?l+=" (null prototype)":l+=` (${o})`),l+=`: ${st(Ke,r(t),e)}]`,i!==""&&i!==o&&(l+=` [${i}]`),n.length!==0||e.stylize===Ke?l:e.stylize(l,zn(s))}function Vr(t,e,n){let r=`class ${de(t,"name")&&t.name||"(anonymous)"}`;if(e!=="Function"&&e!==null&&(r+=` [${e}]`),n!==""&&e!==n&&(r+=` [${n}]`),e!==null){let s=et(t).name;s&&(r+=` extends ${s}`)}else r+=" extends [null prototype]";return`[${r}]`}function Wr(t,e,n){let o=wn(t);if(o.startsWith("class")&&o.endsWith("}")){let s=o.slice(5,-1),l=s.indexOf("{");if(l!==-1&&(!s.slice(0,l).includes("(")||Rr.test(s.replace(Or))))return Vr(t,e,n)}let i="Function";qn(t)&&(i=`Generator${i}`),Zn(t)&&(i=`Async${i}`);let r=`[${i}`;return e===null&&(r+=" (null prototype)"),t.name===""?r+=" (anonymous)":r+=`: ${t.name}`,r+="]",e!==i&&e!==null&&(r+=` ${e}`),n!==""&&e!==n&&(r+=` [${n}]`),r}function Gr(t,e){for(let n=0;n<t.length-3;n++){let o=e.indexOf(t[n]);if(o!==-1){let i=e.length-o;if(i>3){let r=1,s=B(t.length-n,i);for(;s>r&&t[n+r]===e[o+r];)r++;if(r>3)return{len:r,offset:n}}}}return{len:0,offset:0}}function Jt(t){return t.stack?String(t.stack):En(t)}function Hr(t,e,n){let o=n.split(`
`);if(e.cause&&Ft(e.cause)){let i=Jt(e.cause),r=i.indexOf(`
    at`);if(r!==-1){let s=i.slice(r+1).split(`
`),{len:l,offset:a}=Gr(o,s);if(l>0){let f=l-2,c=`    ... ${f} lines matching cause stack trace ...`;o.splice(a+1,f,t.stylize(c,"undefined"))}}}return o}function Jr(t,e,n,o){let i=n.length;if(e===null||n.endsWith("Error")&&t.startsWith(n)&&(t.length===i||t[i]===":"||t[i]===`
`)){let r="Error";if(e===null){let l=t.match(/^([A-Z][a-z_ A-Z0-9[\]()-]+)(?::|\n {4}at)/)||t.match(/^([a-z_A-Z0-9-]*Error)$/);r=l&&l[1]||"",i=r.length,r=r||"Error"}let s=_(e,o,r).slice(0,-1);n!==s&&(s.includes(n)?i===0?t=`${s}: ${t}`:t=`${s}${t.slice(i)}`:t=`${s} [${n}]${t.slice(i)}`)}return t}function Zr(t,e,n,o){if(!t.showHidden&&e.length!==0)for(let i of["name","message","stack"]){let r=e.indexOf(i);r!==-1&&o.includes(n[i])&&e.splice(r,1)}}function qr(t,e,n,o,i){let r=t.name!=null?String(t.name):"Error",s=Jt(t);Zr(o,i,t,s),"cause"in t&&(i.length===0||!i.includes("cause"))&&i.push("cause"),s=Jr(s,e,r,n);let l=t.message&&s.indexOf(t.message)||-1;l!==-1&&(l+=t.message.length);let a=s.indexOf(`
    at`,l);if(a===-1)s=`[${s}]`;else{let f=s.slice(0,a),c=Hr(o,t,s.slice(a+1));if(o.colors)for(let p of c){let y=p.match(kr);if(y!==null&&vr.exists(y[1]))f+=`
${o.stylize(p,"undefined")}`;else{let h;f+=`
`;let w=0;for(;(h=Cr.exec(p))!==null;)f+=p.slice(w,h.index+14),f+=o.stylize(h[1],"module"),w=h.index+h[0].length;f+=w===0?p:p.slice(w)}}else f+=`
${c.join(`
`)}`;s=f}if(o.indentationLvl!==0){let f=" ".repeat(o.indentationLvl);s=s.replace(/\n/g,`
${f}`)}return s}function Yr(t,e,n){let o=0,i=0,r=0,s=e.length;t.maxArrayLength<e.length&&s--;let l=2,a=new Array(s);for(;r<s;r++){let c=ot(e[r],t.colors);a[r]=c,o+=c+l,i<c&&(i=c)}let f=i+l;if(f*3+t.indentationLvl<t.breakLength&&(o/f>5||i<=6)){let p=gt(f-o/e.length),y=fe(f-3-p,1),h=B($n(gt(2.5*y*s)/y),An((t.breakLength-t.indentationLvl)/f),t.compact*4,15);if(h<=1)return e;let w=[],$=[];for(let E=0;E<h;E++){let z=0;for(let C=E;C<e.length;C+=h)a[C]>z&&(z=a[C]);z+=l,$[E]=z}let ee=Re;if(n!==void 0){for(let E=0;E<e.length;E++)if(typeof n[E]!="number"&&typeof n[E]!="bigint"){ee=jn;break}}for(let E=0;E<s;E+=h){let z=B(E+h,s),C="",u=E;for(;u<z-1;u++){let v=$[u-E]+e[u].length-a[u];C+=ee(`${e[u]}, `,v," ")}if(ee===Re){let v=$[u-E]+e[u].length-a[u]-l;C+=Re(e[u],v," ")}else C+=e[u];N(w,C)}t.maxArrayLength<e.length&&N(w,e[s]),e=w}return e}function Xr(t,e,n,o){if(Tt(e))return t.seen.pop(),t.indentationLvl=o,t.stylize(`[${n}: Inspection interrupted prematurely. Maximum call stack size exceeded.]`,"special");throw new Error(e.stack)}function Ve(t){let e="",n=t.length,o=t.startsWith("-")?1:0;for(;n>=o+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return n===t.length?t:`${t.slice(0,n)}${e}`}function Qr(t){let e="",n=0;for(;n<t.length-3;n+=3)e+=`${t.slice(n,n+3)}_`;return n===0?t:`${e}${t.slice(n)}`}function it(t,e,n){if(!n)return Mn(e,-0)?t("-0","number"):t(`${e}`,"number");let o=kn(e),i=String(o);return o===e?!Cn(e)||i.includes("e")?t(i,"number"):t(`${Ve(i)}`,"number"):Ot(e)?t(i,"number"):t(`${Ve(i)}.${Qr(String(e).slice(i.length+1))}`,"number")}function Zt(t,e,n){let o=String(e);return t(n?`${Ve(o)}n`:`${o}n`,"bigint")}function st(t,e,n){if(typeof e=="string"){let o="";if(e.length>n.maxStringLength){let i=e.length-n.maxStringLength;e=e.slice(0,n.maxStringLength),o=`... ${i} more character${i>1?"s":""}`}return n.compact!==!0&&e.length>Mr&&e.length>n.breakLength-n.indentationLvl-4?e.split(/(?<=\n)/).map(i=>t(Ue(i),"string")).join(` +
${" ".repeat(n.indentationLvl+2)}`)+o:t(Ue(e),"string")+o}return typeof e=="number"?it(t,e,n.numericSeparator):typeof e=="bigint"?Zt(t,e,n.numericSeparator):typeof e=="boolean"?t(`${e}`,"boolean"):typeof e>"u"?t("undefined","undefined"):t(Lt(e),"symbol")}function eo(t,e,n,o){let i=new Array(t.length);for(let r=0;r<t.length;r++)try{i[r]=q(e,n,o,t[r],Z)}catch(s){Vt(Kt(s)&&s.name==="ReferenceError");let l={[t[r]]:""};i[r]=q(e,l,o,t[r],Z);let a=i[r].lastIndexOf(" ");i[r]=i[r].slice(0,a+1)+e.stylize("<uninitialized>","special")}return t.length=0,i}function to(t,e,n,o,i,r){let s=_e(e),l=r;for(;r<s.length&&i.length<o;r++){let f=s[r],c=+f;if(c>2**32-2)break;if(`${l}`!==f){if(!$r.test(f))break;let p=c-l,y=p>1?"s":"",h=`<${p} empty item${y}>`;if(i.push(t.stylize(h,"undefined")),l=c,i.length===o)break}i.push(q(t,e,n,f,rt)),l++}let a=e.length-l;if(i.length!==o){if(a>0){let f=a>1?"s":"",c=`<${a} empty item${f}>`;i.push(t.stylize(c,"undefined"))}}else a>0&&i.push(`... ${a} more item${a>1?"s":""}`);return i}function no(t,e){let n;try{n=new Uint8Array(e)}catch{return[t.stylize("(detached)","special")]}Me===void 0&&(Me=function(s){return[...new Uint8Array(s)].map(l=>l.toString(16).padStart(2,"0")).join("")});let o=Un(be(/(.{2})/g,Me(n,0,B(t.maxArrayLength,n.length)),"$1 ")),i=n.length-t.maxArrayLength;return i>0&&(o+=` ... ${i} more byte${i>1?"s":""}`),[`${t.stylize("[Uint8Contents]","special")}: <${o}>`]}function ro(t,e,n){let o=e.length,i=B(fe(0,t.maxArrayLength),o),r=o-i,s=[];for(let l=0;l<i;l++){if(!de(e,l))return to(t,e,n,i,s,l);s.push(q(t,e,n,l,rt))}return r>0&&s.push(`... ${r} more item${r>1?"s":""}`),s}function oo(t,e,n,o,i){let r=B(fe(0,n.maxArrayLength),e),s=t.length-r,l=new Array(r),a=t.length>0&&typeof t[0]=="number"?it:Zt;for(let f=0;f<r;++f)l[f]=a(n.stylize,t[f],n.numericSeparator);if(s>0&&(l[r]=`... ${s} more item${s>1?"s":""}`),n.showHidden){n.indentationLvl+=2;for(let f of["BYTES_PER_ELEMENT","length","byteLength","byteOffset","buffer"]){let c=A(n,t[f],i,!0);N(l,`[${f}]: ${c}`)}n.indentationLvl-=2}return l}function vt(t,e,n,o){let i=[];e.indentationLvl+=2;for(let r of t)N(i,A(e,r,o));return e.indentationLvl-=2,i}function St(t,e,n,o){let i=[];e.indentationLvl+=2;for(let{0:r,1:s}of t)i.push(`${A(e,r,o)} => ${A(e,s,o)}`);return e.indentationLvl-=2,i}function qt(t,e,n,o){let i=fe(t.maxArrayLength,0),r=B(i,n.length),s=new Array(r);t.indentationLvl+=2;for(let a=0;a<r;a++)s[a]=A(t,n[a],e);t.indentationLvl-=2,o===Ae&&!t.sorted&&yn(s);let l=n.length-r;return l>0&&N(s,`... ${l} more item${l>1?"s":""}`),s}function Yt(t,e,n,o){let i=fe(t.maxArrayLength,0),r=n.length/2,s=r-i,l=B(i,r),a=new Array(l),f=0;if(t.indentationLvl+=2,o===Ae){for(;f<l;f++){let c=f*2;a[f]=`${A(t,n[c],e)} => ${A(t,n[c+1],e)}`}t.sorted||(a=a.sort())}else for(;f<l;f++){let c=f*2,p=[A(t,n[c],e),A(t,n[c+1],e)];a[f]=lt(t,p,"",["[","]"],ce,e)}return t.indentationLvl-=2,s>0&&a.push(`... ${s} more item${s>1?"s":""}`),a}function bt(t){return[t.stylize("<items unknown>","special")]}function io(t,e,n){let o=Pe(e);return qt(t,n,o,Ae)}function so(t,e,n){let o=Pe(e);return Yt(t,n,o,Ae)}function Et(t,e,n,o){let{0:i,1:r}=Pe(n,!0);return r?(t[0]=t[0].replace(/ Iterator] {$/," Entries] {"),Yt(e,o,i,Ir)):qt(e,o,i,xr)}function lo(t,e,n){return[""]}function q(t,e,n,o,i,r,s=e){let l,a,f=" ";if(r=r||Se(e,o)||{value:e[o],enumerable:!0},r.value!==void 0){let c=t.compact!==!0||i!==Z?2:3;t.indentationLvl+=c,a=A(t,r.value,n),c===3&&t.breakLength<ot(a,t.colors)&&(f=`
${" ".repeat(t.indentationLvl)}`),t.indentationLvl-=c}else if(r.get!==void 0){let c=r.set!==void 0?"Getter/Setter":"Getter",p=t.stylize,y="special";if(t.getters&&(t.getters===!0||t.getters==="get"&&r.set===void 0||t.getters==="set"&&r.set!==void 0))try{let h=Ze(r.get,s);if(t.indentationLvl+=2,h===null)a=`${p(`[${c}:`,y)} ${p("null","null")}${p("]",y)}`;else if(typeof h=="object")a=`${p(`[${c}]`,y)} ${A(t,h,n)}`;else{let w=st(p,h,t);a=`${p(`[${c}:`,y)} ${w}${p("]",y)}`}t.indentationLvl-=2}catch(h){let w=`<Inspection threw (${h.message})>`;a=`${p(`[${c}:`,y)} ${w}${p("]",y)}`}else a=t.stylize(`[${c}]`,y)}else r.set!==void 0?a=t.stylize("[Setter]","special"):a=t.stylize("undefined","undefined");if(i===rt)return a;if(typeof o=="symbol"){let c=be(je,Lt(o),ze);l=`[${t.stylize(c,"symbol")}]`}else o==="__proto__"?l="['__proto__']":r.enumerable===!1?l=`[${be(je,o,ze)}]`:tt(Ar,o)!==null?l=t.stylize(o,"name"):l=t.stylize(Ue(o),"string");return`${l}:${f}${a}`}function wt(t,e,n,o){let i=e.length+n;if(i+e.length>t.breakLength)return!1;for(let r=0;r<e.length;r++)if(t.colors?i+=Bt(e[r]).length:i+=e[r].length,i>t.breakLength)return!1;return o===""||!re(o,`
`)}function lt(t,e,n,o,i,r,s){if(t.compact!==!0){if(typeof t.compact=="number"&&t.compact>=1){let c=e.length;if(i===ce&&c>6&&(e=Yr(t,e,s)),t.currentDepth-r<t.compact&&c===e.length){let p=e.length+t.indentationLvl+o[0].length+n.length+10;if(wt(t,e,p,n)){let y=oe(e,", ");if(!y.includes(`
`))return`${n?`${n} `:""}${o[0]} ${y} ${o[1]}`}}}let f=`
${yt(" ",t.indentationLvl)}`;return`${n?`${n} `:""}${o[0]}${f}  ${oe(e,`,${f}  `)}${f}${o[1]}`}if(wt(t,e,0,n))return`${o[0]}${n?` ${n}`:""} ${oe(e,", ")} `+o[1];let l=yt(" ",t.indentationLvl),a=n===""&&o[0].length===1?" ":`${n?` ${n}`:""}
${l}  `;return`${o[0]}${a}${oe(e,`,
${l}  `)} ${o[1]}`}ot=function(e,n=!0){let o=0;n&&(e=fo(e)),e=Dn(e,"NFC");for(let i of new Ln(e)){let r=Tn(i,0);ao(r)?o+=2:co(r)||o++}return o};var ao=t=>t>=4352&&(t<=4447||t===9001||t===9002||t>=11904&&t<=12871&&t!==12351||t>=12880&&t<=19903||t>=19968&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510||t>=110592&&t<=110593||t>=127488&&t<=127569||t>=127744&&t<=128591||t>=131072&&t<=262141),co=t=>t<=31||t>=127&&t<=159||t>=768&&t<=879||t>=8203&&t<=8207||t>=8400&&t<=8447||t>=65024&&t<=65039||t>=65056&&t<=65071||t>=917760&&t<=917999;function fo(t){return Er(t,"str"),t.replace(Nr,"")}var Xt=O;var Qt={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0};var D=___altvEsbuild_altvInject_alt___,en=___altvEsbuild_altvInject_altShared___,at=class{log=new I("shared");resourceStopEvent=()=>{this.log.debug("resourceStop");for(let e of this.metaKeys)D.deleteMeta(e)};origAltOn;origAltOnce;origAltOff;origAltSetMeta;eventHandlers={local:{},remote:{}};metaKeys=new Set;baseObjects=new Set;hookedAltEvents={};eventHandlersWrappers=new Map;constructor(e){e.dev.enabled&&(this.origAltOn=this.hookAltEventAdd("local","on",1),this.origAltOnce=this.hookAltEventAdd("local","once",1,!0),this.origAltOff=this.hookAltEventRemove("local","off",1),this.hookAlt("getEventListeners",(n,o)=>typeof o=="string"?[...this.eventHandlers.local[o]??[]]:n(o),1),this.hookAlt("getRemoteEventListeners",(n,o)=>typeof o=="string"?[...this.eventHandlers.remote[o]??[]]:n(o),1),this.origAltSetMeta=this.hookAlt("setMeta",(n,o,i)=>{this.metaKeys.add(o),n(o,i)},2),this.origAltOn("resourceStop",this.resourceStopEvent),e.enhancedAltLog&&this.hookAltLogging())}hookAlt(e,n,o){let i=D[e];if(i==null)throw new Error(`[hookAlt] original property is not defined: ${e}`);if(Object.hasOwn(i,"___hookAlt"))throw new Error(`[hookAlt] already hooked property: ${e}`);return n.prototype||(n=n.bind(null,i)),Object.defineProperty(n,"___hookAlt",{enumerable:!1,configurable:!1,writable:!1,value:!0}),D[e]=(...r)=>{if(r.length<o)throw new Error(`${o} arguments expected`);return n(...r)},en[e]!=null&&(en[e]=n),i}hookAltEventAdd(e,n,o,i=!1){return this.hookAlt(n,(r,s,l)=>{if(!(typeof s=="string"||typeof s=="function"))throw new Error("Expected a string or function as first argument");if(typeof s=="function"){r(s);return}if(typeof l!="function")throw new Error("Expected a function as second argument");let a=this.eventHandlers[e];(a[s]??(a[s]=new Set)).add(l);let f=async(...p)=>{if(i&&(a[s]?.delete(l),this.eventHandlersWrappers.get(s)?.delete(l)),this.hookedAltEvents[s]){this.log.debug("skip calling user handler of hooked alt event:",s);return}try{await l(...p)}catch(y){throw this.logEventException(s,y),y}},c=this.eventHandlersWrappers.get(s)??new Map;this.eventHandlersWrappers.set(s,c),c.set(l,f),r(s,f)},o)}hookAltEventRemove(e,n,o){return this.hookAlt(n,(i,r,s)=>{if(this.log.debug(`hooked alt.${n} called args:`,r,typeof s),!(typeof r=="string"||typeof r=="function"))throw new Error("Expected a string or function as first argument");if(typeof r=="function"){i(r);return}if(typeof s!="function")throw new Error("Expected a function as second argument");let l=this.eventHandlersWrappers.get(r);if(!l){this.log.debug(`alt.${n} called but event handlers are not registered for event: ${r}`);return}let a=l.get(s);if(!a){this.log.debug(`alt.${n} called but event handler is not registered for event: ${r}`);return}this.eventHandlers[e][r]?.delete(s),l?.delete(s),i(r,a)},o)}hookAltEvent(e,n){this.hookedAltEvents[e]=!0,this.log.debug("hooked alt event:",e);let o=this.origAltOn??D.on;this.log.debug("hookAltEvent altOn:",o),o(e,async(...i)=>{this.log.debug("received hooked alt event:",e);try{let r=await n(...i);if(r===!1){this.log.debug("hooked altv event:",e,"was canceled");return}this.log.debug("hooked altv event:",e,"calling with args:",r),this.emitAltEvent(e,...r)}catch(r){this.log.error("hook of altv event:",e,"error:",r)}})}emitAltEvent(e,...n){let o=this.eventHandlers.local[e];if(!o){this.log.debug("callAltEvent:",e,"no handlers");return}o.forEach(async i=>{try{await i(...n)}catch(r){this.logEventException(e,r)}})}setPlayerObjectPrototype(e,n=D.Player){Object.setPrototypeOf(e,n.prototype)}generateEventName(e){return`___${x}:${e}___`}wrapBaseObjectChildClass(e){let n=e.prototype,o=Symbol("originalDestroy"),i=this.baseObjects,r=this.log;n[o]=n.destroy,n.destroy=function(){try{i.delete(this),this[o]()}catch(l){throw r.error(`failed to destroy alt.${e.name} error:`),l}};let s=function(...l){try{let a=new e(...l);return i.add(a),Object.setPrototypeOf(a,this.__proto__),a}catch(a){throw r.error(`failed to create alt.${e.name} error:`),a}};s.prototype=e.prototype,Object.defineProperty(s,"name",{value:e.name});try{let l=Object.keys(e);for(let a of l)if(!Qt[a])try{let{value:f,set:c}=Object.getOwnPropertyDescriptor(e,a);typeof f=="function"?s[a]=e[a]:Object.defineProperty(s,a,{get:()=>e[a],set:c?.bind(e)})}catch(f){this.log.error(`detected broken alt.${e.name} static property: ${a}. 
`,f?.stack??f)}}catch(l){this.log.error(l.stack??l)}return s}destroyBaseObjects(){this.log.debug("destroyBaseObjects count:",this.baseObjects.size);for(let e of this.baseObjects)e.destroy()}onResourceStop(e){this.origAltOn("resourceStop",e)}defineMetaSetter(e,n,o){return function(i,r){if(arguments.length<2)throw new Error("2 arguments expected");this[n](i,r),this[o]??={},this[o][i]=r}}hookAltLogging(){let e=(o,...i)=>{o(...i.map(r=>typeof r=="string"?r:Xt(r,{colors:!0})))},n=this.hookAlt("log",e,0);D.isClient&&(console.log=e.bind(null,n)),D.logDebug&&this.hookAlt("logDebug",e,0)}logEventException(e,n){D.logError(`Uncaught exception in event listener of event "${e}":
`,n?.stack??n)}},d=new at(___altvEsbuild_altvInject_pluginOptions___);var j={restartCommand:d.generateEventName("restartCommand"),clientReady:d.generateEventName("clientReady"),playerModelsLoaded:d.generateEventName("playerModelsLoaded")},W={playerConnect:d.generateEventName("playerConnect"),connectionComplete:d.generateEventName("connectionComplete"),loadPlayerModels:d.generateEventName("loadPlayerModels")};var b=___altvEsbuild_altvInject_alt___,k;b.isClient&&(k=___altvEsbuild_altvInject_native___);var $e=class{origAltOnServer;log=new I("client");clearPlayerMeta;onResourceStop=()=>{this.clearGame(),d.destroyBaseObjects(),this.clearPlayerMeta?.()};constructor(e){let{bugFixes:n,dev:o}=e;n.webViewFlickering&&this.initWebViewFlickeringBugFix(),n.playerDamageOnFirstConnect&&this.initPlayerDamageOnFirstConnectFix(),o.enabled&&(this.origAltOnServer=d.hookAltEventAdd("remote","onServer",1),d.hookAltEventAdd("remote","onceServer",1,!0),d.hookAltEventRemove("remote","offServer",1),n.playerPrototype&&this.initPlayerPrototypeTempFix(),o.restartCommand&&this.initRestartConsoleCommand(e),o.disconnectEvent&&this.initDisconnectEvent(),o.connectionCompleteEvent&&(this.log.debug("dev.connectionCompleteEvent:",o.connectionCompleteEvent),this.initConnectionCompleteEvent()),this.initClientReady(),this.hookBaseObjects(),this.clearPlayerMeta=this.initPlayerMetaCleanup(),d.onResourceStop(this.onResourceStop))}initPlayerPrototypeTempFix(){b.nextTick(()=>{for(let e of b.Player.all)e.valid&&(e!==b.Player.local?d.setPlayerObjectPrototype(e):(this.log.debug("set local player prototype"),d.setPlayerObjectPrototype(e,b.LocalPlayer)))}),this.origAltOnServer(W.playerConnect,e=>{d.setPlayerObjectPrototype(e)})}initRestartConsoleCommand(e){let n=e.dev.restartCommand===!0?"res":e.dev.restartCommand;this.log.debug("initRestartConsoleCommand command:",n),d.origAltOn("consoleCommand",o=>{o===n&&(this.log.info("~gl~restarting resource"),b.emitServerRaw(j.restartCommand))})}initWebViewFlickeringBugFix(){b.everyTick(()=>k.drawRect(0,0,0,0,0,0,0,0,!1))}initDisconnectEvent(){this.log.debug("initDisconnectEvent"),d.origAltOn("resourceStop",()=>d.emitAltEvent("disconnect"))}initConnectionCompleteEvent(){this.log.debug("initConnectionCompleteEvent");let e=!1;d.origAltOn("connectionComplete",()=>{e=!0}),this.origAltOnServer(W.connectionComplete,()=>{this.log.debug("received connectionComplete"),!e&&d.emitAltEvent("connectionComplete")})}initClientReady(){b.emitServerRaw(j.clientReady)}clearGame(){let e=b.Player.local;k.freezeEntityPosition(e,!1),k.setEntityVisible(e,!0,!1),k.doScreenFadeIn(0),k.triggerScreenblurFadeOut(0),k.stopAudioScenes(),k.newLoadSceneStop(),k.destroyAllCams(!1),k.animpostfxStopAll(),k.setCamDeathFailEffectState(0),k.displayHud(!0),k.displayRadar(!0),b.FocusData.clearFocus(),k.setFrontendActive(!1)}hookBaseObjects(){for(let e in b){let n=e,o=b[n];(this.isAltBlipClass(o)||this.isAltObjectClass(o))&&(this.log.debug("hooking class:",o.name),b[n]=d.wrapBaseObjectChildClass(o))}}isAltBlipClass(e){return e.prototype instanceof b.Blip}isAltObjectClass(e){return e.prototype instanceof b.Entity&&e.name==="Object"}initPlayerMetaCleanup(){let e=b.Player.prototype,n=e,o=Symbol("metaStoreKey"),i=Symbol("originalSetMeta");return n[i]=e.setMeta,e.setMeta=d.defineMetaSetter(n,i,o),()=>{for(let r of b.Player.all){if(!r?.valid)continue;let s=r;for(let l in s[o])r.deleteMeta(l)}}}initPlayerDamageOnFirstConnectFix(){(this.origAltOnServer??b.onServer)(W.loadPlayerModels,async()=>{this.log.debug("playerDamageOnFirstConnectFix loading models...");let n=await Promise.allSettled([b.Utils.requestModel("mp_m_freemode_01"),b.Utils.requestModel("mp_f_freemode_01")]);this.log.debug("playerDamageOnFirstConnectFix load model promises results",n),b.emitServerRaw(j.playerModelsLoaded)})}};var ue=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e instanceof Error?e:new Error(e))}};var pe=class{constructor(e,n,o){this._net=e;this.port=n;this.connectHandler=o;this._socket=this.connect()}onError=e=>{(e?.code==="ECONNRESET"||e?.code==="ECONNREFUSED")&&(pe.logDebug(`disconnected from server, trying reconnecting in ${pe.RECONNECT_MS}ms...`),setTimeout(()=>this.connect(),pe.RECONNECT_MS))};onConnect=e=>{this.connectHandler(e)};_socket;get socket(){return this._socket}connect(){this._socket&&this._socket.destroy();let e=this._net.connect(this.port);return e.on("connect",this.onConnect.bind(this,e)),e.on("error",this.onError),e}},X=pe;G(X,"RECONNECT_MS",500),G(X,"logDebug",()=>{});var m=___altvEsbuild_altvInject_alt___,tn;m.isServer&&(tn=await(async()=>await import("net"))());var ke=class{constructor(e){this.options=e;let{dev:n,bugFixes:o}=e;if(o.playerDamageOnFirstConnect&&this.initPlayerDamageOnFirstConnectFix(),n.enabled){this.origAltOnClient=d.hookAltEventAdd("remote","onClient",1),d.hookAltEventAdd("remote","onceClient",1,!0),d.hookAltEventRemove("remote","offClient",1),d.hookAlt("setSyncedMeta",(s,l,a)=>{this.syncedMetaKeys.add(l),s(l,a)},2),this.hookBaseObjects();let i=this.hookAltPlayer(),r=()=>{};if(n.playersReconnect){this.initPlayersReconnect(e);let s=new m.Vector3((m.getServerConfig().mapBoundsMaxX??1e5)+2e3);this.log.debug("despawnPlayers streamOutPos:",s),r=this.despawnPlayers.bind(this,s)}d.onResourceStop(this.onResourceStop.bind(this,i,r)),n.hotReload&&(this.socketConnect=new X(tn,this.options.dev.hotReloadServerPort,s=>{this.socket=s,this.eventManager=this.initEventManager(s),this.onConnect(),this.connectedAgain=!0})),n.enhancedRestartCommand?this.initEnhancedRestartCommand(e):n.restartCommand&&this.initRestartConsoleCommand(e),n.connectionCompleteEvent&&this.initConnectionCompleteEvent(),o.playerPrototype&&this.initPlayerPrototypeTempFix(),n.serverStartedEvent&&this.initServerStartedEvent()}}events={buildStart:e=>{this.log.debug(`[buildStart] ms: ${new Date().getMilliseconds()} mode:`,e),this.onBuildStart(e)},buildEnd:(e,n)=>{if(this.log.debug("[buildEnd] received:",e),n&&(this.log.debug("received cached buildEnd -> emulate buildStart first"),this.onBuildStart(e)),!this.buildsInProgress.delete(e)){this.log.debug(`received unknown buildEnd: ${e}, do nothing`);return}if(this.buildsInProgress.size){this.log.debug("remaining builds in progress:",this.buildsInProgress.size),this.waitingForBuildEnd===e&&(this.waitingForBuildEnd=this.flipMode(e));return}if(this.waitingForBuildEnd!==e){this.log.debug("received not what we waiting for");return}this.log.debug("no builds in progress -> restart"),this.restartResource()},clientConnect:()=>{this.log.debug("clientConnect"),this.clientConnected=!0},clientDisconnect:()=>{this.log.debug("clientDisconnect"),this.clientConnected=!1}};onConnect=()=>{if(this.connectedAgain){this.restartResource();return}this.log.debug("net socket connected, sending connect server event"),this.sendEvent("connect","server")};onSocketError=(e,n)=>{this.log.error("[events]",e,n)};onResourceStop=(e,n)=>{this.log.debug("resourceStop");for(let o of this.syncedMetaKeys)this.log.debug("deleting synced meta key:",o),m.deleteSyncedMeta(o);e(),n(),d.destroyBaseObjects()};socket;eventManager;log=new I("server");clientConnected=!1;anotherBuildStartTimeout=null;waitingForBuildEnd=null;restartInProgress=!1;connectedAgain=!1;buildsInProgress=new Set;syncedMetaKeys=new Set;origAltOnClient;socketConnect;playerReadyEvents=new Map;sendEvent(e,...n){if(!this.eventManager){this.log.error("[sendEvent] no event manager");return}this.eventManager?.send(e,...n)}restartResource(){if(this.restartInProgress){this.log.error("resource restart already in progress");return}this.restartInProgress=!0,this.clearCurrentBuild();let e=this.getFullResourceName();this.log.info(`restarting resource ${e}...`),m.restartResource(e)}clearCurrentBuild(){this.waitingForBuildEnd=null,this.buildsInProgress.clear()}flipMode(e){return e==="client"?"server":"client"}initEventManager(e){return new ge(e,this.events,this.onSocketError)}hookAltPlayer(){let e=m.Player.prototype,n=Symbol("metaStoreKey"),o=Symbol("syncedMetaStoreKey"),i=Symbol("streamSyncedMetaStoreKey"),r=Symbol("localMetaStoreKey"),s=Symbol("originalSetMeta"),l=Symbol("originalSetSyncedMeta"),a=Symbol("originalSetStreamSyncedMeta"),f=Symbol("originalSetLocalMeta"),c=e;return c[s]=e.setMeta,c[l]=e.setSyncedMeta,c[a]=e.setStreamSyncedMeta,c[f]=e.setLocalMeta,e.setMeta=d.defineMetaSetter(c,s,n),e.setSyncedMeta=d.defineMetaSetter(c,l,o),e.setStreamSyncedMeta=d.defineMetaSetter(c,a,i),e.setLocalMeta=d.defineMetaSetter(c,f,r),()=>{for(let p of m.Player.all){if(!p?.valid)continue;let y=p;for(let h in y[n])p.deleteMeta(h);for(let h in y[o])p.deleteSyncedMeta(h);for(let h in y[i])p.deleteStreamSyncedMeta(h);for(let h in y[r])p.deleteLocalMeta(h)}}}initPlayersReconnect({dev:{playersReconnectDelay:e,playersReconnectResetPos:n}}){let o=`${x}:resourceRestarted`;if(this.log.debug("_alt.getMeta(resourceRestartedKey):",m.getMeta(o)),!m.getMeta(o)){this.log.debug("set resource restarted"),d.origAltSetMeta(o,!0);return}let i=m.Player.all;if(!i.length){this.log.debug("no players to reconnect");return}for(let r of i)r.valid&&this.initPlayerReadyEvent(r);this.log.info(`start a timer for ~cl~${e}~w~ ms to reconnect players (${i.length})`),setTimeout(()=>{for(let r of i)r.valid&&(r.dimension=m.defaultDimension,r.streamed=!0,r.collision=!0,r.invincible=!1,r.visible=!0,r.frozen=!1,this.waitForPlayerReadyEvent(r).then(s=>{if(!s){this.log.debug("waitForPlayerReadyEvent promise resolved false, player disconnected");return}this.log.debug("waitForPlayerReadyEvent success player:",r.name,r.id),d.emitAltEvent("playerConnect",r)}).catch(s=>{this.log.error(s.stack)}))},e)}despawnPlayers(e){this.log.debug("despawn players");for(let n of m.Player.all)n.valid&&(n.removeAllWeapons(),n.clearBloodDamage(),n.detach(),n.despawn(),n.visible=!1,this.options.dev.playersReconnectResetPos&&(n.pos=e))}initPlayerPrototypeTempFix(){m.nextTick(()=>{for(let e of m.Player.all)e.valid&&d.setPlayerObjectPrototype(e)}),d.origAltOn("playerConnect",e=>{d.setPlayerObjectPrototype(e)})}initRestartConsoleCommand(e){let n=e.dev.restartCommand===!0?"res":e.dev.restartCommand,o=()=>{this.restartResource()};d.origAltOn("consoleCommand",i=>{i===n&&o()}),this.origAltOnClient(j.restartCommand,()=>{o()})}initEnhancedRestartCommand({dev:{enhancedRestartCommand:e}}){let n=e===!0?"res":e;if(m.hasResource(te))this.log.debug("control resource already started",te);else{this.log.debug("control resource is not started",te);let o=`../node_modules/altv-esbuild/dist/${te}`;this.log.debug("resource control path:",o),m.nextTick(()=>{d.origAltOnce(d.generateEventName("resourceControlReady"),()=>{m.emit(d.generateEventName("resourceControlInit"),this.getFullResourceName(),n)}),m.startResource(o)})}}initConnectionCompleteEvent(){this.log.debug("initConnectionCompleteEvent"),this.origAltOnClient(j.clientReady,e=>{this.log.debug("received clientReady player:",e.name,e.id),e.emitRaw(W.connectionComplete);let n=this.playerReadyEvents.get(e);if(!n){this.log.debug("cant get ready event, skip");return}n.resolve(!0)})}hookBaseObjects(){for(let e in m){let n=e,o=m[n];if(!this.isBaseObjectClass(o))continue;let i=!1;try{new o,i=!0}catch(r){r?.message?.includes("abstract")&&(i=!0)}i||(m[n]=d.wrapBaseObjectChildClass(o))}}isBaseObjectClass(e){return e.prototype instanceof m.BaseObject&&e!==m.Player}onBuildStart(e){let n=this.flipMode(e);if(this.buildsInProgress.add(e),this.buildsInProgress.size===1&&this.waitingForBuildEnd===n&&this.buildsInProgress.has(n)){this.log.debug(`waiting currently for first build, change waitingForBuildEnd to: ${e}`),this.waitingForBuildEnd=e;return}if(this.anotherBuildStartTimeout){this.log.debug("[buildStart] received another build:",e,"clear timeout"),clearTimeout(this.anotherBuildStartTimeout),this.anotherBuildStartTimeout=null;return}if(e==="server"&&!this.clientConnected){this.log.debug("[buildStart] client is not connected, skip waiting for another build"),this.waitingForBuildEnd=e;return}this.waitingForBuildEnd=n,this.log.debug(`[buildStart] waiting for another build: ${this.waitingForBuildEnd} to start...`),this.anotherBuildStartTimeout=setTimeout(()=>{this.anotherBuildStartTimeout=null,this.log.debug(`another build didnt started after ${ke.MAX_ANOTHER_BUILD_START_MS}ms`),this.buildsInProgress.has(e)?(this.log.debug(`waiting for build: ${e} to end now...`),this.waitingForBuildEnd=e):(this.log.debug(`first build: ${e} ended -> restart`),this.restartResource())},ke.MAX_ANOTHER_BUILD_START_MS)}initPlayerReadyEvent(e){let n=new ue;this.playerReadyEvents.set(e,n);let o=i=>{i===e&&(this.playerReadyEvents.delete(e),n.resolve(!1))};n.promise.finally(()=>{d.origAltOff("playerDisconnect",o)}),d.origAltOn("playerDisconnect",o),this.origAltOnClient(d.generateEventName("playerReady"),o)}async waitForPlayerReadyEvent(e){let n=this.playerReadyEvents.get(e);return n?await n.promise:(this.log.warn("waitForPlayerReadyEvent unknown player:",e.name,e.id),!1)}getFullResourceName(){let{path:e}=m.Resource.current,n=`${m.rootDir}\\resources\\`;return e.slice(n.length).replaceAll("\\","/")}initServerStartedEvent(){this.log.debug("initServerStartedEvent");let e=new m.Utils.Timeout(()=>{e=null,this.log.debug("emitting serverStarted from timer"),d.emitAltEvent("serverStarted")},500);d.hookAltEvent("serverStarted",(...n)=>e?(e?.destroy(),e=null,this.log.debug("emitting serverStarted from original"),n):(this.log.error("original serverStarted was called, but timer is already null"),!1))}initPlayerDamageOnFirstConnectFix(){let e=new Map,n=(i,r)=>{if(!r.valid){i.reject(new Error("[playerDamageOnFirstConnectFix] player object is invalid"));return}i.resolve([r])};d.hookAltEvent("playerConnect",i=>{this.log.debug("playerDamageOnFirstConnectFix received playerConnect",i.name,i.id);let r=new ue;e.set(i,r);let s=m.setTimeout(()=>{s=0,this.log.warn("[playerDamageOnFirstConnectFix] resolve playerConnect after timeout"),n(r,i)},5e3);return r.promise.finally(()=>{this.log.debug("playerDamageOnFirstConnectFix promise.finally player:",i.name,i.id),s&&(m.clearTimeout(s),s=0),e.delete(i)}),i.emitRaw(W.loadPlayerModels),r.promise}),(this.origAltOnClient??m.onClient)(j.playerModelsLoaded,i=>{this.log.debug("received playerModelsLoaded player:",i.name,i.id);let r=e.get(i);if(!r){this.log.debug("cant get loadingModelPromise, skip");return}n(r,i)})}},Q=ke;G(Q,"MAX_ANOTHER_BUILD_START_MS",500),G(Q,"RECONNECT_MS",500);var ct=___altvEsbuild_altvInject_pluginOptions___;ct.mode==="client"?new $e(ct):new Q(ct);
})().catch(e => ___altvEsbuild_altvInject_altShared___.logError("[altv-esbuild] banner wrapper error:", e?.stack ?? e?.message ?? e));
try {// ------------------- altv-esbuild banner -------------------

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// altv-esbuild:external-handling-natives:natives
var require_natives = __commonJS({
  "altv-esbuild:external-handling-natives:natives"(exports, module) {
    module.exports = ___altvEsbuild_altvInject_native___;
  }
});

// src/client/main.ts
var native = __toESM(require_natives(), 1);
native.setClockTime(3, 0, 0);

// ------------------- altv-esbuild footer -------------------
} catch (e) {
        const error = ___altvEsbuild_altvInject_altShared___.logError;

        // hide all other user logs to show error at a glance
        ___altvEsbuild_altvInject_altShared___.log = () => {};
        ___altvEsbuild_altvInject_altShared___.logWarning = () => {};
        ___altvEsbuild_altvInject_altShared___.logError = () => {};
        ___altvEsbuild_altvInject_alt___.log = () => {};
        ___altvEsbuild_altvInject_alt___.logWarning = () => {};
        ___altvEsbuild_altvInject_alt___.logError = () => {};
        console.log = () => {};
        console.warn = () => {};
        console.error = () => {};

        ___altvEsbuild_altvInject_altShared___.setTimeout(() => {
          error(
            "[altv-esbuild] Top-level exception:\n  ",
            e?.stack ?? e
          );
        }, 500);
        if (___altvEsbuild_altvInject_alt___.isClient) {
          drawError("TOP-LEVEL EXCEPTION", "see client console", "(it's message from altv-esbuild)");
          function drawError(title,text,text2){
            const alt = ___altvEsbuild_altvInject_alt___;
            alt.addGxtText("warning_error",title);
            alt.addGxtText("warning_text",text);
            alt.addGxtText("warning_text2",text2);
            let state=!alt.isConsoleOpen();
            const timeout=alt.setInterval(()=>{state=!alt.isConsoleOpen()},50);
            const tick=alt.everyTick(()=>{
              if (state) {
                ___altvEsbuild_altvInject_native___.setWarningMessageWithHeader(
                  "warning_error",
                  "warning_text",
                  0,
                  "warning_text2",
                  false, -1,
                  null, null,
                  true, 0
                );
              }
            });
            return()=>{alt.clearInterval(timeout);alt.clearEveryTick(tick)}
          }
        }
      }
// ------------------- altv-esbuild footer -------------------

